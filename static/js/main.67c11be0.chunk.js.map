{"version":3,"sources":["Helpers/Db.js","Helpers/Constants.js","Components/Feed.js","Components/Icon.js","Components/Alert.js","Components/Feeds.js","Components/List.js","Components/Viewer.js","App.js","serviceWorker.js","index.js"],"names":["DbContext","React","createContext","db_feeds","PouchDB","db_feeds_items","PROXY_PATH","FAVICON_PROVIDER","ONBOARDING_FEED","Feed","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onFeedChange","listener","context","changes","since","live","include_docs","on","item","_","indexOf","state","unread","doc","_id","setState","filter","current","alert","loading","id","icon","title","uri","parser","Parser","parseURL","feed","newItems","items","forEach","date","isoDate","pubDate","replace","moment","ts","unix","push","guid","feedId","_this2","desc","contentSnippet","content","link","favorite","bulkDocs","result","ok","uniq","concat","toConsumableArray","map","loaded","console","error","_context","t0","cancel","react_default","a","createElement","onClick","className","length","src","alt","substring","Component","contextType","CloseIcon","assign","xmlns","width","height","viewBox","d","fill","OpenInNewIcon","ShareIcon","StarFullIcon","StarIcon","CompactIcon","LightIcon","NewUserAlert","triggerOK","Feeds","handleChange","event","rss","target","value","toLowerCase","trim","handleAppForeground","lastupdate","Date","now","toFixed","feeds","closeFeed","document","getElementsByClassName","classList","add","addFeed","_ref","asyncToGenerator","regenerator_default","mark","_callee","info","base","wrap","prev","next","abrupt","test","sent","fetch","arrayBuffer","then","buffer","binary","slice","Uint8Array","b","String","fromCharCode","imageStr","window","btoa","put","t1","stop","_x","apply","arguments","onFeedLoad","addDefaultFeed","addEventListener","removeEventListener","nextProps","Alert_NewUserAlert","process","Icon_CloseIcon","type","ref","c","_input","onChange","placeholder","disabled","Components_Feed","key","List","openFeedList","remove","markAllAsRead","warn","showFavoriteItems","_callee2","favoriteItems","_context2","optionFavorite","oldItems","allDocs","rows","switchDisplayMode","optionDisplayLarge","switchDarkMode","toggle","optionDarkMode","load","_ref3","_callee3","e","_context3","preventDefault","openViewer","get","_x2","_this3","emptyView","loadingView","markAsReadButton","orderedItems","sortBy","o","unreadItems","Icon_StarFullIcon","Icon_CompactIcon","Icon_LightIcon","href","rel","fromNow","Viewer","handleBackButton","active","close","history","replaceState","share","navigator","text","url","el","style","position","left","body","appendChild","select","execCommand","removeChild","_rev","viewer","Icon_OpenInNewIcon","Icon_ShareIcon","Icon_StarIcon","format","dangerouslySetInnerHTML","__html","App","location","hash","feedsItems","persistedItems","persistedFeeds","log","Components_Feeds","Components_List","Components_Viewer","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","render","src_App_0","getElementById","URL","origin","response","contentType","headers","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.67c11be0.chunk.js","sourcesContent":["import React   from 'react';\nimport PouchDB from 'pouchdb';\n\nexport const DbContext = React.createContext({\n\tdb_feeds:       new PouchDB('pager_feeds'),\n\tdb_feeds_items: new PouchDB('pager_feeds_items')\n});","// During Development or without using the docker image\n// You can simply use \"https://cors-anywhere.herokuapp.com/\" as PROXY_PATH variable to get around CORS security.\nexport const PROXY_PATH       = 'https://cors-anywhere.herokuapp.com/';\n\nexport const FAVICON_PROVIDER = 'https://s2.googleusercontent.com/s2/favicons?domain_url=';\nexport const ONBOARDING_FEED  = 'https://xkcd.com/rss.xml';","import _ from 'lodash';\nimport moment from 'moment';\nimport React, { Component } from 'react';\nimport { DbContext } from '../Helpers/Db';\nimport { PROXY_PATH } from '../Helpers/Constants';\nimport Parser from 'rss-parser';\n\nclass Feed extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.listener = null;\n\t\tthis.state    = {\n\t\t\tloading: true,\n\t\t\tid:      this.props.id,\n\t\t\ticon:    this.props.icon,\n\t\t\ttitle:   this.props.title,\n\t\t\turi:     this.props.uri,\n\t\t\tunread:  this.props.unread || []\n\t\t}\n\t}\n\n\tasync componentDidMount() {\n\t\t//Attach listner\n\t\tthis.onFeedChange();\n\n\t\tlet parser = new Parser();\n\t\tlet uri = `${PROXY_PATH}${this.state.uri}`;\n\n\t\ttry {\n\t\t\tlet feed     = await parser.parseURL(uri);\n\t\t\tlet newItems = [];\n\n\t\t\tfeed.items.forEach(item => {\n\n\t\t\t\tlet date = item.isoDate || (item.pubDate) ? item.pubDate.replace(/CET|CEST/gi, '') : moment();\n\t\t\t\tlet ts   = moment(date).unix();\n\n\t\t\t\tnewItems.push({\n\t\t\t\t\t_id:      item.guid || item.id,\n\t\t\t\t\tfeedId:   this.state.id,\n\t\t\t\t\ticon:     this.state.icon,\n\t\t\t\t\ttitle:    item.title,\n\t\t\t\t\tdesc:     item.contentSnippet,\n\t\t\t\t\tcontent:  item[\"content:encoded\"] || item.content,\n\t\t\t\t\tdate:     ts,\n\t\t\t\t\tlink:     item.link,\n\t\t\t\t\tunread:   true,\n\t\t\t\t\tfavorite: false,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t//Try to add new document\n\t\t\t//If document already exist coucheDB will fail with conflict\n\t\t\tlet result = await this.context.db_feeds_items.bulkDocs(newItems);\n\t\t\t//Keep only successful new insertion\n\t\t\tresult = result.filter(item => item.ok === true);\n\t\t\tthis.setState({ loading: false, unread: _.uniq([...this.state.unread, ...result.map(item => item.id)]) });\n\t\t\t//Notify parent feeds load\n\t\t\tthis.props.loaded(this.state);\n\t\t} catch(e) {\n\t\t\tconsole.error(`Unable to fetch feed: ${uri} reason: ${e}`);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.listener.cancel();\n\t\tthis.listener = null;\n\t}\n\n\tonFeedChange = () => {\n\t\t//Attach listener for new feed changes\n\t\tthis.listener = this.context.db_feeds_items.changes({\n\t\t\tsince: 'now',\n\t\t\tlive: true,\n\t\t\tinclude_docs: true\n\t\t}).on('change', (item) => {\n\n\t\t\t//Remove item from unread\n\t\t\tif (_.indexOf(this.state.unread, item.doc._id) !== -1 && item.doc.unread === false) {\n\t\t\t\tthis.setState({unread: this.state.unread.filter(current => current !== item.doc._id)})\n\t\t\t}\n\t\t});\n\t}\n\n\tfilter = () => {\n\t\t//TODO: Filter only this feed\n\t\talert(\"Not implemented.\");\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<li onClick={this.filter} title={this.state.title}>\n\t\t\t\t<div className=\"n\">{(this.state.loading) ? '...' : this.state.unread.length}</div>\n\t\t\t\t<div className=\"i\"><img src={this.state.icon} alt=\"-\" /></div>\n\t\t\t\t<div className=\"t\">{this.state.title.substring(0, 30)}</div>\n\t\t\t</li>\n\t\t)\n\t}\n}\n\nFeed.contextType = DbContext;\nexport default Feed;","import React from 'react';\n\n// Close\n// Source: https://material.io/tools/icons/?style=baseline\n// Licensce: Apache 2.0\nconst CloseIcon = props => (\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n\t\t<path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\n\t\t<path d=\"M0 0h24v24H0z\" fill=\"none\" />\n\t</svg>\n);\n\n// OpenInNewIcon\n// Source: https://material.io/tools/icons/?style=baseline\n// Licensce: Apache 2.0\nconst OpenInNewIcon = props => (\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n\t\t<path d=\"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z\" />\n\t\t<path d=\"M0 0h24v24H0z\" fill=\"none\" />\n\t</svg>\n)\n\n// ShareIcon\n// Source: https://material.io/tools/icons/?style=baseline\n// Licensce: Apache 2.0\nconst ShareIcon = props => (\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n\t\t<path d=\"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z\" />\n\t\t<path d=\"M0 0h24v24H0z\" fill=\"none\" />\n\t</svg>\n)\n\n// StarFullIcon\n// Source: https://material.io/tools/icons/?style=baseline\n// Licensce: Apache 2.0\nconst StarFullIcon = props => (\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n\t\t<path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\" />\n\t\t<path d=\"M0 0h24v24H0z\" fill=\"none\" />\n\t</svg>\n)\n\n// StarIcon\n// Source: https://material.io/tools/icons/?style=baseline\n// Licensce: Apache 2.0\nconst StarIcon = props => (\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n\t\t<path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\" />\n\t\t<path d=\"M0 0h24v24H0z\" fill=\"none\" />\n\t</svg>\n)\n\n// CompactIcon\n// Source: https://material.io/tools/icons/?style=baseline\n// Licensce: Apache 2.0\nconst CompactIcon = props => (\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n\t\t<path d=\"M3 19h6v-7H3v7zm7 0h12v-7H10v7zM3 5v6h19V5H3z\" />\n\t\t<path fill=\"none\" d=\"M0 0h24v24H0z\" />\n\t</svg>\n)\n\n// Light\n// Source: https://material.io/tools/icons/?style=baseline\n// Licensce: Apache 2.0\nconst LightIcon = props => (\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n\t\t<path d=\"M6 14l3 3v5h6v-5l3-3V9H6zm5-12h2v3h-2zM3.5 5.875L4.914 4.46l2.12 2.122L5.62 7.997zm13.46.71l2.123-2.12 1.414 1.414L18.375 8z\" />\n\t\t<defs><path id=\"a\" d=\"M0 0h24v24H0V0z\" /></defs>\n\t</svg>\n)\n\nexport {\n\tCloseIcon,\n\tOpenInNewIcon,\n\tShareIcon,\n\tStarFullIcon,\n\tStarIcon,\n\tCompactIcon,\n\tLightIcon,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\n// NewUserAlert\n// Onboarding\n// Provide help by adding first feed link\nconst NewUserAlert = props => (\n\t<div className=\"App-Alert\">\n\t\t<div className=\"App-Alert-Title\">Seems like you are new here ?</div>\n\t\t<div className=\"App-Alert-Content\">Let me help you by adding new contents for you :-)</div>\n\t\t<div className=\"App-Alert-Actions\">\n\t\t\t<button onClick={props.triggerOK}>OK</button>\n\t\t</div>\n\t</div>\n);\n\nNewUserAlert.propTypes = {\n\ttriggerOK: PropTypes.func.isRequired\n};\n\nexport {\n\tNewUserAlert\n};","import React, { Component } from 'react';\nimport { DbContext } from '../Helpers/Db';\nimport Parser from 'rss-parser';\nimport Feed from './Feed';\nimport { CloseIcon } from './Icon';\nimport { NewUserAlert } from './Alert';\nimport {\n\tPROXY_PATH,\n\tFAVICON_PROVIDER,\n\tONBOARDING_FEED\n} from '../Helpers/Constants';\n\nclass Feeds extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.lastupdate = (Date.now() / 1000).toFixed();\n\t\tthis.state      = {\n\t\t\trss:     '',\n\t\t\tloading: true,\n\t\t\tloaded:  0,\n\t\t\tfeeds:   this.props.feeds,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.addEventListener(\"visibilitychange\", this.handleAppForeground);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener(\"visibilitychange\", this.handleAppForeground)\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.feeds !== this.props.feeds) {\n\t\t\tthis.setState({ feeds: nextProps.feeds, loading: false });\n\t\t}\n\t}\n\n\thandleChange = (event) => {\n\t\tthis.setState({ rss: event.target.value.toLowerCase().trim()});\n\t}\n\n\thandleAppForeground = (event) => {\n\t\t//Trigger automatic update on app foreground\n\t\t//Update only if lastupdate < 1 minute\n\t\t//User can still force update with pull-to-refresh\n\t\tif (this.lastupdate <= (Date.now() / 1000).toFixed() - 60) {\n\t\t\tlet feeds       = this.state.feeds;\n\t\t\tthis.lastupdate = (Date.now() / 1000).toFixed();\n\n\t\t\t//Force update\n\t\t\t//TODO: (0_') burk..\n\t\t\tthis.setState({ feeds: [], loaded: 0 });\n\t\t\tthis.setState({ feeds });\n\t\t}\n\t}\n\n\tcloseFeed = () => {\n\t\t// Hide feeds list\n\t\tdocument.getElementsByClassName('App-Feeds')[0].classList.add(\"hide\");\n\t}\n\n\taddFeed = async (link) => {\n\t\tlet rss = link;\n\n\t\t// Test feed validity\n\t\tif (rss === \"\") {\n\t\t\talert(\"Please add rss feed link first.\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!/^(http|https):\\/\\//.test(rss)) {\n\t\t\talert(\"Missing http/https scheme.\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Loader\n\t\tthis.setState({ loading: true });\n\n\t\tlet feed = {\n\t\t\t_id:   rss,\n\t\t\turi:   rss,\n\t\t\ttitle: rss,\n\t\t\ticon:  ''\n\t\t};\n\n\t\t//Trying to fetch xml feed\n\t\ttry {\n\t\t\tlet parser = new Parser();\n\t\t\tlet uri = `${PROXY_PATH}${rss}`;\n\n\t\t\tlet info = await parser.parseURL(uri);\n\t\t\tif (info.title) {\n\t\t\t\t//Add feed title\n\t\t\t\tfeed.title = info.title;\n\t\t\t}\n\n\t\t\t//Use google as favicon provider (o_O)\n\t\t\tlet base = info.link || rss;\n\t\t\tlet icon = await fetch(`${PROXY_PATH}${FAVICON_PROVIDER}${base}`);\n\t\t\tawait icon.arrayBuffer().then((buffer) => {\n\t\t\t\t//Read stream\n\t\t\t\tvar binary     = '';\n\t\t\t\tvar bytes      = [].slice.call(new Uint8Array(buffer));\n\t\t\t\t\tbytes.forEach((b) => binary += String.fromCharCode(b));\n\t\t\t\tvar imageStr   = window.btoa(binary);\n\n\t\t\t\t//Save icon as base64\n\t\t\t\tfeed.icon = `data:image/png;base64,${imageStr}`;\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tthis.setState({ loading: false });\n\t\t\tconsole.error(`Unable to add feed: ${rss} reason: ${e}`);\n\t\t\talert(\"Ooops something goes wrong..\");\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait this.context.db_feeds.put(feed);\n\t\t\tthis.setState({\n\t\t\t\tloading: false,\n\t\t\t\trss:     '',\n\t\t\t\tfeeds:   [...this.state.feeds, ...[feed]]\n\t\t\t});\n\t\t} catch(e) {\n\t\t\tthis.setState({ loading: false });\n\t\t\tconsole.error(`Unable to add feed: ${rss} reason: ${e}`);\n\t\t}\n\t}\n\n\tonFeedLoad = () => {\n\t\t// Listening feed load\n\t\tthis.setState({ loaded: this.state.loaded + 1 });\n\t}\n\n\taddDefaultFeed = () => {\n\t\t// Adding onboarding feed\n\t\tthis.addFeed(ONBOARDING_FEED);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"App-Feeds-Container\">\n\t\t\t\t{ /* Loader */}\n\t\t\t\t<div className=\"App-Feeds-Loader\">\n\t\t\t\t\t{ (this.state.loading || (this.state.feeds.length !== this.state.loaded)) && <div className=\"loader\"></div> }\n\t\t\t\t</div>\n\n\t\t\t\t{ /* Onboarding if empty feeds */}\n\t\t\t\t{ (this.state.feeds.length === 0 && !this.state.loading) && <NewUserAlert triggerOK={this.addDefaultFeed} /> }\n\n\t\t\t\t{ /* Manage feeds */}\n\t\t\t\t<div className=\"App-Feeds hide\">\n\t\t\t\t\t<h1>\n\t\t\t\t\t\t<img alt=\"pager\" src={process.env.PUBLIC_URL + '/favicon.png'} />\n\t\t\t\t\t\t<button className=\"App-Feeds-Toggle\" onClick={this.closeFeed}>\n\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</h1>\n\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"App-Feeds-Input\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tref={c => (this._input = c)}\n\t\t\t\t\t\tvalue={this.state.rss}\n\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\tplaceholder=\"Add rss feed link here..\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{this.state.loading ? (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\tclassName=\"App-Feeds-Add\">\n\t\t\t\t\t\t\tLOADING...\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"App-Feeds-Add\"\n\t\t\t\t\t\t\tonClick={() => this.addFeed(this.state.rss)}>\n\t\t\t\t\t\t\tADD (+)\n\t\t\t\t\t\t</button>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{this.state.feeds.map((feed) => (\n\t\t\t\t\t\t\t<Feed key={feed._id} id={feed._id} icon={feed.icon} title={feed.title} uri={feed.uri} unread={feed.unread} loaded={this.onFeedLoad} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFeeds.contextType = DbContext;\nexport default Feeds;","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport { DbContext } from '../Helpers/Db';\nimport {\n\tStarFullIcon,\n\tCompactIcon,\n\tLightIcon,\n} from './Icon';\n\nclass List extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.listener = null;\n\t\tthis.state    = {\n\t\t\tloading: true,\n\t\t\titems:   this.props.items,\n\n\t\t\t//Activate options\n\t\t\toptionFavorite: false,\n\t\t\toptionDisplayLarge: false,\n\t\t\toptionDarkMode: false,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\t//Attach listener for new feed changes\n\t\tthis.listener = this.context.db_feeds_items.changes({\n\t\t\tsince:        'now',\n\t\t\tlive:         true,\n\t\t\tinclude_docs: true\n\t\t}).on('change', (item) => {\n\t\t\t//TODO: Improve mark as read should not trigger full render\n\n\t\t\t//Is this item already exist\n\t\t\tlet isExist = this.state.items.filter(current => current._id === item.doc._id);\n\t\t\tif (isExist.length > 0) {\n\t\t\t\t//Update existing item\n\t\t\t\tthis.setState({ items: this.state.items.map(current => (\n\t\t\t\t\tcurrent._id === item.doc._id ? Object.assign({}, current, item.doc) : current\n\t\t\t\t))});\n\t\t\t} else {\n\t\t\t\t//Add new item to feed list\n\t\t\t\tthis.setState({ items: [...this.state.items, ...[item.doc]] });\n\t\t\t}\n\t\t});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.listener.cancel();\n\t\tthis.listener = null;\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.items !== this.props.items) {\n\t\t\tthis.setState({ loading: false, items: nextProps.items });\n\t\t}\n\t}\n\n\topenFeedList = () => {\n\t\t//Only mobile\n\t\t//Open left panel to manage feeds\n\t\tdocument.getElementsByClassName('App-Feeds')[0].classList.remove(\"hide\");\n\t}\n\n\t//Mark all items as read\n\tmarkAllAsRead = async () => {\n\t\ttry {\n\t\t\tlet items = this.state.items;\n\t\t\titems.map((item) => { item.unread = false; })\n\n\t\t\t//Bulk update\n\t\t\tawait this.context.db_feeds_items.bulkDocs(items);\n\t\t} catch (e) {\n\t\t\tconsole.warn(`Unable to mark all as read, reason: ${e}`);\n\t\t}\n\t}\n\n\t//Show only favorite items\n\t//Can be used as read it later feature\n\tshowFavoriteItems = async () => {\n\t\tif (this.state.loading === true) return;\n\t\tthis.setState({ loading: true, items: [], optionFavorite: !this.state.optionFavorite });\n\n\t\tif (this.state.optionFavorite === false) {\n\t\t\t//Storing old state\n\t\t\tthis.oldItems = this.state.items;\n\n\t\t\t//Fetching favorite items\n\t\t\tlet favoriteItems = await this.context.db_feeds_items.allDocs({ include_docs: true });\n\t\t\tfavoriteItems = favoriteItems.rows.filter((item) => item.doc.favorite === true);\n\t\t\tfavoriteItems = favoriteItems.map(item => item.doc);\n\n\t\t\tthis.setState({ loading: false, items: favoriteItems });\n\t\t} else {\n\t\t\t//Restoring old state\n\t\t\tthis.setState({ loading: false, items: this.oldItems });\n\t\t\tdelete this.oldItems;\n\t\t}\n\t}\n\n\t//Switch display mode\n\t//Default: compact\n\t//Available: large\n\tswitchDisplayMode = () => {\n\t\tthis.setState({optionDisplayLarge: !this.state.optionDisplayLarge});\n\t}\n\n\t//Switch dark mode\n\t//Default: white\n\t//Available: black\n\tswitchDarkMode = () => {\n\t\tdocument.getElementsByClassName('App')[0].classList.toggle(\"dark\");\n\t\tthis.setState({ optionDarkMode: !this.state.optionDarkMode });\n\t}\n\n\t// Open link target in a new tab or inside the embeded viewer\n\tload = async (e, item) => {\n\t\t//Dismiss default action and open it in embeded viewer\n\t\te.preventDefault();\n\t\tthis.props.openViewer(item);\n\n\t\ttry {\n\t\t\t//Mark as read\n\t\t\tvar item = await this.context.db_feeds_items.get(item._id);\n\t\t\t\titem.unread = false;\n\n\t\t\tawait this.context.db_feeds_items.put(item);\n\t\t} catch(e) {\n\t\t\tconsole.warn(`Unable to mark as read item: ${item._id} reason: ${e}`);\n\t\t}\n\t}\n\n\trender() {\n\t\tlet emptyView = (\n\t\t\t<div className=\"App-List-Empty\">\n\t\t\t\t<h1>(o_O)</h1>\n\t\t\t\t<p>There is nothing to read right now..</p>\n\t\t\t</div>\n\t\t);\n\t\tlet loadingView = (\n\t\t\t<div className=\"App-List-Empty\">\n\t\t\t\t<p>loading...</p>\n\t\t\t</div>\n\t\t);\n\t\tlet markAsReadButton = (\n\t\t\t<div className=\"App-List-Mark-As-Read-Button\" onClick={this.markAllAsRead}>\n\t\t\t\t<p>MARK ALL AS READ</p>\n\t\t\t</div>\n\t\t);\n\n\n\t\t//Order by date DESC\n\t\tlet orderedItems = _.sortBy(this.state.items, [(o) => { return -o.date }]);\n\n\t\t//Unread items\n\t\tlet unreadItems  = this.state.items.filter(item => item.unread === true);\n\n\t\treturn (\n\t\t\t<div className=\"App-List\">\n\t\t\t\t<div className=\"App-List-Options\">\n\t\t\t\t\t<button onClick={this.openFeedList} className=\"App-List-Options-Open-Feeds\">Feeds</button>\n\t\t\t\t\t<button onClick={this.showFavoriteItems} title=\"Show only favorites\" className={this.state.optionFavorite ? 'active' : ''}>\n\t\t\t\t\t\t<StarFullIcon />\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={this.switchDisplayMode} title=\"Switch to large view\" className={this.state.optionDisplayLarge ? 'active' : ''}>\n\t\t\t\t\t\t<CompactIcon />\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={this.switchDarkMode} title=\"Switch to dark mode\" className={this.state.optionDarkMode ? 'active' : ''}>\n\t\t\t\t\t\t<LightIcon />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<ul className={this.state.optionDisplayLarge ? 'large' : 'compact'}>\n\t\t\t\t\t{orderedItems.map((item) => (\n\t\t\t\t\t\t<a key={item._id} href={item.link} onClick={(e) => this.load(e, item)} target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\t\t\t<li className={item.unread ? 'unread' : ''}>\n\t\t\t\t\t\t\t\t<div className=\"i\"><img alt=\"icon\" src={item.icon} /></div>\n\t\t\t\t\t\t\t\t<div className=\"ts\">{moment.unix(item.date).fromNow(true)}</div>\n\t\t\t\t\t\t\t\t<div className=\"t\">{(item.title) ? item.title.substring(0, 150) : ''}</div>\n\t\t\t\t\t\t\t\t<div className=\"d\">{(item.desc) ? item.desc.substring(0, 180) : ''}...</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\n\t\t\t\t{(this.state.loading === true) && loadingView}\n\t\t\t\t{(this.state.loading === false && orderedItems.length === 0) && emptyView}\n\t\t\t\t{(unreadItems.length > 0) && markAsReadButton}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nList.contextType = DbContext;\nexport default List;","import React, { Component } from 'react';\nimport moment from 'moment';\nimport { DbContext } from '../Helpers/Db';\nimport {\n\tCloseIcon,\n\tOpenInNewIcon,\n\tShareIcon,\n\tStarFullIcon,\n\tStarIcon,\n} from './Icon';\n\nclass Viewer extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\t_id:      null,\n\t\t\t_rev:     null,\n\t\t\ticon:     null,\n\t\t\ttitle:    null,\n\t\t\tdate:     null,\n\t\t\tcontent:  null,\n\t\t\tlink:     null,\n\t\t\tfavorite: false,\n\t\t\tactive:   false\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener(\"popstate\", this.handleBackButton);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"popstate\", this.handleBackButton);\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tlet viewer = nextProps.viewer;\n\t\tif (viewer) {\n\t\t\tthis.setState({\n\t\t\t\t_id:      viewer._id,\n\t\t\t\t_rev:     viewer._rev,\n\t\t\t\ticon:     viewer.icon,\n\t\t\t\ttitle:    viewer.title,\n\t\t\t\tdate:     viewer.date,\n\t\t\t\tcontent:  viewer.content,\n\t\t\t\tlink:     viewer.link,\n\t\t\t\tfavorite: viewer.favorite || false,\n\t\t\t\tactive:   true\n\t\t\t});\n\t\t}\n\t}\n\n\thandleBackButton = () => {\n\t\t//Handle back button then close viewer\n\t\tif (this.state.active) {\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tclose = () => {\n\t\t//Close and unreference content\n\t\t//Activity inside the embedded viewer will be destroy ex: youtube player..\n\t\tthis.setState({ active: false, content: null });\n\t\twindow.history.replaceState(null, null, ' ');\n\t}\n\n\tfavorite = async () => {\n\t\ttry {\n\t\t\t//Toggle favorite\n\t\t\tvar item = await this.context.db_feeds_items.get(this.state._id);\n\t\t\titem.favorite = !this.state.favorite;\n\n\t\t\tawait this.context.db_feeds_items.put(item);\n\t\t\tthis.setState({ favorite: item.favorite });\n\t\t} catch (e) {\n\t\t\tconsole.warn(`Unable to toggle favorite item: ${this.state._id} reason: ${e}`);\n\t\t}\n\t}\n\n\tshare = () => {\n\t\tif (navigator && navigator.share) {\n\t\t\tnavigator.share({\n\t\t\t\ttitle: this.state.title,\n\t\t\t\ttext:  this.state.title,\n\t\t\t\turl:   this.state.link,\n\t\t\t});\n\t\t} else {\n\t\t\t//Fallback\n\t\t\t//If web share is not available\n\t\t\t//Copy link to clipboard\n\t\t\tconst el = document.createElement('textarea');\n\t\t\tel.value = this.state.link;\n\t\t\tel.style.position = 'absolute';\n\t\t\tel.style.left = '-9999px';\n\t\t\tdocument.body.appendChild(el);\n\t\t\tel.select();\n\t\t\tdocument.execCommand('copy');\n\t\t\tdocument.body.removeChild(el);\n\t\t\talert(\"Copied to clipboard!\");\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={this.state.active ? 'App-Viewer active' : 'App-Viewer'}>\n\t\t\t\t<div className=\"App-Viewer-Options\">\n\t\t\t\t\t<button className=\"App-Viewer-Options-Close\" onClick={this.close}><CloseIcon /></button>\n\t\t\t\t\t<a\n\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\thref={this.state.link}\n\t\t\t\t\t\tonClick={this.close}>\n\t\t\t\t\t<button title=\"Open to new tab\"><OpenInNewIcon /></button></a>\n\t\t\t\t\t<button title=\"Share link\" onClick={this.share}><ShareIcon /></button>\n\t\t\t\t\t<button title=\"Add to favorite\" onClick={this.favorite}>\n\t\t\t\t\t\t{this.state.favorite ? <StarFullIcon /> : <StarIcon /> }\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"App-Viewer-Title\">\n\t\t\t\t\t<h1><img alt=\"icon\" src={this.state.icon} /> {this.state.title}</h1>\n\t\t\t\t\t<p>{moment.unix(this.state.date).format(\"LLLL\")}</p>\n\t\t\t\t</div>\n\n\t\t\t\t{ /* TODO: find safer way.. */}\n\t\t\t\t<div className=\"App-Viewer-Content\" dangerouslySetInnerHTML={{ __html: this.state.content }} />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nViewer.contextType = DbContext;\nexport default Viewer;","import React, { Component } from 'react';\nimport { DbContext } from './Helpers/Db';\nimport './App.scss';\n\n//Components\nimport Feeds  from './Components/Feeds';\nimport List   from './Components/List';\nimport Viewer from './Components/Viewer';\n\nclass App extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tloading:    true,\n\t\t\tviewer:     null,\n\t\t\tfeeds:      [ ],\n\t\t\tfeedsItems: [ ]\n\t\t}\n\t}\n\n\tasync componentDidMount() {\n\t\t//Initialize persisted feeds items\n\t\tlet persistedItems = await this.context.db_feeds_items.allDocs({ include_docs: true });\n\t\t\tpersistedItems = persistedItems.rows.filter((item) => item.doc.unread === true);\n\t\t\tpersistedItems = persistedItems.map(item => item.doc);\n\n\t\t//Initialize persisted feeds\n\t\tlet persistedFeeds = await this.context.db_feeds.allDocs({ include_docs: true });\n\t\t\tpersistedFeeds = persistedFeeds.rows.map(feed => {\n\t\t\t\tfeed.doc.unread = persistedItems.filter((item) => item.feedId === feed.id);\n\t\t\t\tfeed.doc.unread = feed.doc.unread.map(item => item._id);\n\n\t\t\t\tconsole.log(`Feed ${feed.id} has ${feed.doc.unread.length} unread.`);\n\t\t\t\treturn feed.doc;\n\t\t\t});\n\n\t\tthis.setState({\n\t\t\tloading:    false,\n\t\t\tfeeds:      [...persistedFeeds],\n\t\t\tfeedsItems: [...persistedItems]\n\t\t});\n\t}\n\n\topenViewer = (item) => {\n\t\twindow.location.hash = \"#viewer\";\n\t\tthis.setState({ viewer: item });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"App\">\n\t\t\t\t<Feeds  feeds={this.state.feeds} />\n\t\t\t\t<List   items={this.state.feedsItems} openViewer={this.openViewer} />\n\t\t\t\t<Viewer viewer={this.state.viewer} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nApp.contextType = DbContext;\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}